<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<h:body>
    <ui:composition template="/WEB-INF/templates/template.xhtml">
        <ui:define name="content">
            <h:outputScript library="js" name="dialog.js"/>
            <p:growl id="growl" showDetail="true" sticky="true" life="3000" globalOnly="true"/>
                <p:dialog header="#{texts.monthsOfRent}" widgetVar="dlg" resizable="false" id="dlgid">
                    <h:form id="dialogForm">
                    <h:panelGrid columns="2">
                        <p:outputLabel for="startDateInput" value="#{texts.chooseFirstDayOfMonth}"/>
                        <p:calendar id="startDateInput" value="#{cartMB.orderPart.startDate}" showOn="button"
                                    pattern="MM-yyyy" required="true" requiredMessage="#{texts.emptyFieldERR}">
                            <f:converter converterId="myDateConverter"/>

                        </p:calendar>
                        <p:outputLabel for="endDateInput" value="#{texts.chooseLastDayOfMonth}"/>
                        <p:calendar id="endDateInput" value="#{cartMB.orderPart.endDate}" showOn="button"
                                    pattern="MM-yyyy"
                                    required="true" requiredMessage="#{texts.emptyFieldERR}">
                            <f:converter converterId="myDateConverter"/>
                        </p:calendar>
                    </h:panelGrid>
                    <p:commandButton id="okButton" value="#{texts.ok}"
                                     actionListener="#{cartMB.doVerifyAndAddOrderPartToOrder()}"
                                     update=":#{p:component('cartDisplay')},:growl" oncomplete="handleLoginRequest(xhr, status, args)"/>


                    <p:commandButton id="cancelButton" value="#{texts.cancel}" update=":dialogForm"
                                     oncomplete="PF('dlg').hide();"/>
                    </h:form>
                </p:dialog>


            <h:form id="search" styleClass="form">
                <h:panelGrid columns="2">
                    <p:outputLabel for="floorInput" value="#{texts.floor}"/>
                    <h:panelGroup id="floorInput">
                        <p:inputText id="fromFloorInput" value="#{rentMB.searchDTO.fromFloor}"/>
                        <p:inputText id="toFloorInput" value="#{rentMB.searchDTO.toFloor}"/>
                    </h:panelGroup>
                    <p:outputLabel for="rentInput" value="#{texts.rent}"/>
                    <h:panelGroup id="rentInput">
                        <p:inputText id="fromRentInput" value="#{rentMB.searchDTO.fromRent}"/>
                        <p:inputText id="toRentInput" value="#{rentMB.searchDTO.toRent}"/>
                    </h:panelGroup>
                    <p:outputLabel for="squareInput" value="#{texts.square}"/>
                    <h:panelGroup id="squareInput">
                        <p:inputText id="fromSquareInput" value="#{rentMB.searchDTO.fromSquare}"/>
                        <p:inputText id="toSquareInput" value="#{rentMB.searchDTO.toSquare}"/>
                    </h:panelGroup>
                    <p:outputLabel for="aiconditionInput" value="#{texts.aircondition}"/>
                    <p:selectOneMenu id="aiconditionInput" value="#{rentMB.searchDTO.aircondition}">
                        <f:selectItem itemLabel="#{texts.airconditionExists}" itemValue="#{0}"/>
                        <f:selectItem itemLabel="#{texts.airconditionNotExists}" itemValue="#{1}"/>
                        <f:selectItem itemLabel="#{texts.airconditionDontCare}" itemValue="#{2}"/>
                    </p:selectOneMenu>
                </h:panelGrid>
                <p:commandButton value="#{texts.search}" update=":searchDataTable"/>
            </h:form>
            <p:dataTable id="searchDataTable" var="area" value="#{rentMB.dataModel}" paginator="true" rows="5"
                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowsPerPageTemplate="5,10,15" lazy="true">
                <p:column headerText="#{texts.plan}">
                    <p:graphicImage value="#{area.imagePath}" width="150" height="100"/>
                </p:column>
                <p:column headerText="#{texts.areaNumber}">
                    <h:outputText value="#{area.number}"/>
                </p:column>
                <p:column headerText="#{texts.floor}">
                    <h:outputText value="#{area.floor}"/>
                </p:column>
                <p:column headerText="#{texts.square}">
                    <h:outputText value="#{area.square}"/>
                </p:column>
                <p:column headerText="#{texts.rent}">
                    <h:outputText value="#{area.rent}"/>
                </p:column>
                <p:column headerText="#{texts.aircondition}">
                    <p:graphicImage value="/resources/img/true.png" rendered="#{area.airCondition}" width="32"
                                    height="32"/>
                </p:column>
                <p:column>
                    <h:form>
                        <p:commandButton value="#{texts.rentIt}" oncomplete="PF('dlg').show()"
                                         actionListener="#{cartMB.doChooseArea(area)}">
                        </p:commandButton>
                    </h:form>
                </p:column>
            </p:dataTable>
        </ui:define>
    </ui:composition>
</h:body>
</html>
